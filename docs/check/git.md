# Репозиторий

Используется **git** c тремя основными ветками `master`, `stage`, `develop`. 
У ведущего разработчика должны быт права напрямую пушить во все ветки. Для разработчиков три главные ветки защищаются, чтобы сливать в них толкьо через merge-request.

## develop

2. Для каждой задачи от `develop` создаётся новая ветка, именуется в формате `feature/task-name`.
3. В конце рабочего дня обязательно закоммитить текущие правки по задаче и запушить в gitlab даже если задача полностью не выполнена.
4. После выполнения задачи ветка `feature/task-name` сливается с `develop` через merge-request (запрос на слияние) в gitlab.
5. Ведущий разработчик делает ревью, принимает или отклоняет merge-request. Пока merge-request открыт, новые комиты автоматически будут учитываться в нём.
6. Если есть конфликты для слияния, то разработчик самостоятельно сливает ветку `develop` к ветке с задачей без запросов на слияния, правит конфликты локально, пушит комиты с правками в ветке задачи.
7. `develop` ветка деплоится на dev-сервер, на котором проводятся тесты командой разработчиков, но клиенту dev-сервер не демонстрируется.
8. После слияния старые ветки задач удаляются, чтобы не засорять репозиторий.

## stage (release)

1. По завершению всех задач спринта ветка `develop` сливается в ветку `stage`. 
2. После слияния создается тег с номером спринта, например `s89`. 
3. `stage` ветка деплоится на стейдж сервер, который доступен клиенту. На стейдж сервере проводится демо проекта.
4. Выявленные баги спринта правятся в отдельных ветках от ветки `stage` так как уже может вестись работа по новому спринту в ветке `develop`. Ветка для багов в формате `fix/bug-name`. 
    - После слияния веток с багами добавляется тег с миноным инкрементов, напрмиер `s89.1`.
    - Ветки с багами также сливаются в `develop` или другой вариант - обновленная ветка `stage` подливается в `develop`.
5. Пока задачи текущего спринта не слиты в `stage` работы по новому спринту не начинаются. В крайнем случаи ветки новых задачи не сливаются в `develop`.

## master

10. После принятия задач спринта ветка `stage` сливается в `master`, и делается тег с номером новой версии продукта. Обычно это номер спринта `v89`.
11. `master` ветка деплоится по согласию клиента на production сервер.
12. Если выявляются критические баги в уже продакшене, то для исправления каждого бага создается ветка `hotfix/bug-name` от ветки `master`.
    - После слияния веток с багами добавляется тег с минорным инкрементом, напрмиер `v89.1` 
    - Ветки с багами также сливаются в `develop` или другой вариант - обновленная ветка `master` подливается в `develop`. stage ветка остаётся как есть.


